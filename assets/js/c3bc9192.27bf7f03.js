(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{112:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return y}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=a.a.createContext({}),p=function(e){var t=a.a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return a.a.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),s=p(n),m=r,y=s["".concat(c,".").concat(m)]||s[m]||u[m]||o;return n?a.a.createElement(y,i(i({ref:t},d),{},{components:n})):a.a.createElement(y,i({ref:t},d))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var d=2;d<o;d++)c[d]=n[d];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},97:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return d}));var r=n(3),a=(n(0),n(112));const o={title:"\u524d\u7aef\u6c34\u5370"},c={unversionedId:"\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u524d\u7aef\u6c34\u5370/\u524d\u7aef\u6c34\u5370",id:"\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u524d\u7aef\u6c34\u5370/\u524d\u7aef\u6c34\u5370",isDocsHomePage:!1,title:"\u524d\u7aef\u6c34\u5370",description:"\u7f16\u5199\u5de5\u5177\u7c7b",source:"@site/docs/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u524d\u7aef\u6c34\u5370/\u524d\u7aef\u6c34\u5370.md",slug:"/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u524d\u7aef\u6c34\u5370/\u524d\u7aef\u6c34\u5370",permalink:"/zh-summary/docs/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u524d\u7aef\u6c34\u5370/\u524d\u7aef\u6c34\u5370",editUrl:"https://github.com/qinzhihao-conghua/docs/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u524d\u7aef\u6c34\u5370/\u524d\u7aef\u6c34\u5370.md",version:"current",sidebar:"docs",previous:{title:"\u89c2\u5bdf\u8005\u6a21\u5f0f",permalink:"/zh-summary/docs/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u89c2\u5bdf\u8005\u6a21\u5f0f/\u89c2\u5bdf\u8005\u6a21\u5f0f"},next:{title:"\u89c6\u9891\u6d41\u5904\u7406",permalink:"/zh-summary/docs/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u89c6\u9891\u6d41\u5904\u7406/\u89c6\u9891\u6d41\u5904\u7406"}},i=[{value:"\u7f16\u5199\u5de5\u5177\u7c7b",id:"\u7f16\u5199\u5de5\u5177\u7c7b",children:[]},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",children:[]}],l={toc:i};function d(e){let{components:t,...n}=e;return Object(a.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"\u7f16\u5199\u5de5\u5177\u7c7b"},"\u7f16\u5199\u5de5\u5177\u7c7b"),Object(a.b)("p",null,"\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u901a\u8fc7canvas\u751f\u6210\u6587\u5b57\uff0c\u7136\u540e\u8f6c\u6210base64\uff0c\u6700\u540e\u4e22\u5230\u5bbf\u4e3b\u5bb9\u5668\u7684\u80cc\u666f\u4e2d"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-javascript"},'export default class Watermark {\n    /**\n     * \u8bbe\u7f6e\u6c34\u5370\n     * @param str \u6c34\u5370\u6587\u5b57\n     * @param parentNodeId \u7236\u8282\u70b9id\n     * @param contentWindow iframe\u7684window\u5bf9\u8c61\n     * @param textWidth \u6587\u672c\u533a\u57df\u5bbd\u5ea6\n     * @param textHeight \u6587\u672c\u533a\u57df\u9ad8\u5ea6\n     * @returns \u6c34\u5370dom\u7684id\n     */\n    setWatermark(str: string, parentNodeId: string, contentWindow?: Window, textWidth: number = 140, textHeight: number = 140) {\n        let parentNode = null;\n        let canvas = null;\n        if (contentWindow) {\n            parentNode = contentWindow.document.getElementById(parentNodeId) as HTMLElement;\n            canvas = contentWindow.document.createElement(\'canvas\') as HTMLCanvasElement;\n        } else {\n            parentNode = document.getElementById(parentNodeId) as HTMLElement;\n            canvas = document.createElement(\'canvas\') as HTMLCanvasElement;\n        }\n        canvas.width = textWidth;\n        canvas.height = textHeight;\n        const ctx = canvas.getContext("2d");\n        if (ctx) {\n            ctx.rotate((Math.PI / 120) * -20);\n            ctx.font = "16px Microsoft Yahei";\n            ctx.fillStyle = "rgba(0, 0, 0, 0.5)";\n            ctx.textAlign = "center";\n            ctx.textBaseline = "middle";\n            ctx.fillText(str, textWidth / 10, textHeight / 1.5);\n        }\n        parentNode.style.position = \'relative\';\n        parentNode.style.background = \'url(\' + canvas.toDataURL(\'image/png\') + \') left top repeat\';\n    }\n\n    /**\n     * \u8bbe\u7f6e\u9875\u7709\u9875\u811a\u4e3a\u7a7a\uff0c\u5df2\u65e0\u6548\n     */\n    setHeader() {\n        // \u6dfb\u52a0\u4e00\u4e2a\u95f4\u8ddd\n        let style = document.createElement(\'style\')\n        style.innerHTML = "@page{size: a4;margin:" + \'10mm\' + "}"\n        window.document.head.appendChild(style);\n        //\u8bbe\u7f6e\u9875\u7709\u9875\u811a\u4e3a\u7a7a\n        let hkey_root, hkey_path, hkey_key;\n        hkey_root = "HKEY_CURRENT_USER";\n        hkey_path = "\\\\Software\\\\Microsoft\\\\Internet Explorer\\\\PageSetup\\\\";\n        // let RegWsh = new ActiveXObject("WScript.Shell");\n        // hkey_key = "header";\n        // RegWsh.RegWrite(hkey_root + hkey_path + hkey_key, "");\n        // hkey_key = "footer";\n        // RegWsh.RegWrite(hkey_root + hkey_path + hkey_key, "");\n    }\n    /**\n     * \u5220\u9664\u6c34\u5370\u7ed3\u70b9\n     * @param id \u6c34\u5370id\n     * @param parentNodeId \u6c34\u5370\u7236\u5bb9\u5668id \n     */\n    removeWatermark(parentNodeId: string, contentWindow?: Window) {\n        let parentNode = null;\n        if (contentWindow) {\n            parentNode = contentWindow.document.getElementById(parentNodeId) as HTMLElement;\n        } else {\n            parentNode = document.getElementById(parentNodeId) as HTMLElement;\n        }\n        parentNode.style.background = \'unset\';\n    }\n}\n')),Object(a.b)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-javascript"},"const watermark = new Watermark();\nwatermark.setWatermark('\u6d4b\u8bd5\u6c34\u5370', 'printid');\nwatermark.removeWatermark('printid');\n")))}d.isMDXComponent=!0}}]);