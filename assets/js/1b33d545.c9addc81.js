"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5792],{4794:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"angular/angular\u9519\u8bef\u6355\u6349/angular\u9519\u8bef\u6355\u6349","title":"angular\u9519\u8bef\u6355\u6349","description":"\u6d4f\u89c8\u5668\u6355\u6349\u9519\u8bef\u7684\u65b9\u5f0f\u6709\u4ee5\u4e0b\u51e0\u79cd\uff0c\u4f46\u662f\u5e76\u4e0d\u662f\u6240\u6709\u7684\u9519\u8bef\u7c7b\u578b\u90fd\u80fd\u6355\u6349\u5230\uff0c\u4e00\u4e0b\u662f\u4e00\u4e9b\u5dee\u5f02\u60c5\u51b5\uff0c\u8fd9\u53ea\u662f\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5b9e\u9645\u5728\u505a\u9879\u76ee\u7684\u65f6\u5019\u7528\u5230\u7684\u90fd\u662f\u6846\u67b6\uff0c\u6846\u67b6\u4f1a\u5bf9\u6d4f\u89c8\u5668\u7684\u4e00\u4e9b\u884c\u4e3a\u505a\u4fee\u6539\uff0c\u6bd4\u5982angular\u662f\u4ee3\u7406\u4e86\u6d4f\u89c8\u5668\u7684\u884c\u4e3a\u548c\u4e8b\u4ef6\u7b49\uff0c\u56e0\u6b64\u5728angular\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u8fdb\u884c\u9519\u8bef\u6355\u6349\u662f\u5b8c\u5168\u4e0d\u8d77\u4f5c\u7528\u7684\u3002","source":"@site/docs/angular/angular\u9519\u8bef\u6355\u6349/angular\u9519\u8bef\u6355\u6349.md","sourceDirName":"angular/angular\u9519\u8bef\u6355\u6349","slug":"/angular/angular\u9519\u8bef\u6355\u6349/","permalink":"/zh-summary/docs/angular/angular\u9519\u8bef\u6355\u6349/","draft":false,"unlisted":false,"editUrl":"https://github.com/qinzhihao-conghua/docs/angular/angular\u9519\u8bef\u6355\u6349/angular\u9519\u8bef\u6355\u6349.md","tags":[],"version":"current","frontMatter":{"title":"angular\u9519\u8bef\u6355\u6349"},"sidebar":"tutorialSidebar","previous":{"title":"angular\u5de5\u4f5c\u533a","permalink":"/zh-summary/docs/angular/angular\u5de5\u4f5c\u533a/"},"next":{"title":"canDeactivate\u8def\u7531\u5b88\u536b","permalink":"/zh-summary/docs/angular/canDeactivate\u8def\u7531\u5b88\u536b/"}}');var r=t(4848),o=t(8453);const s={title:"angular\u9519\u8bef\u6355\u6349"},l="\u6d4f\u89c8\u5668\u7684\u9519\u8bef\u6355\u6349\u4e8b\u4ef6",d={},i=[{value:"AppErrorHandler",id:"apperrorhandler",level:2},{value:"LogsUtils",id:"logsutils",level:2},{value:"\u4e0b\u8f7d\u65f6\u5019\u83b7\u53d6\u6d4f\u89c8\u5668\u4fe1\u606f",id:"\u4e0b\u8f7d\u65f6\u5019\u83b7\u53d6\u6d4f\u89c8\u5668\u4fe1\u606f",level:2},{value:"html",id:"html",level:2},{value:"typescript",id:"typescript",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u6d4f\u89c8\u5668\u7684\u9519\u8bef\u6355\u6349\u4e8b\u4ef6",children:"\u6d4f\u89c8\u5668\u7684\u9519\u8bef\u6355\u6349\u4e8b\u4ef6"})}),"\n",(0,r.jsx)(n.p,{children:"\u6d4f\u89c8\u5668\u6355\u6349\u9519\u8bef\u7684\u65b9\u5f0f\u6709\u4ee5\u4e0b\u51e0\u79cd\uff0c\u4f46\u662f\u5e76\u4e0d\u662f\u6240\u6709\u7684\u9519\u8bef\u7c7b\u578b\u90fd\u80fd\u6355\u6349\u5230\uff0c\u4e00\u4e0b\u662f\u4e00\u4e9b\u5dee\u5f02\u60c5\u51b5\uff0c\u8fd9\u53ea\u662f\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5b9e\u9645\u5728\u505a\u9879\u76ee\u7684\u65f6\u5019\u7528\u5230\u7684\u90fd\u662f\u6846\u67b6\uff0c\u6846\u67b6\u4f1a\u5bf9\u6d4f\u89c8\u5668\u7684\u4e00\u4e9b\u884c\u4e3a\u505a\u4fee\u6539\uff0c\u6bd4\u5982angular\u662f\u4ee3\u7406\u4e86\u6d4f\u89c8\u5668\u7684\u884c\u4e3a\u548c\u4e8b\u4ef6\u7b49\uff0c\u56e0\u6b64\u5728angular\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u8fdb\u884c\u9519\u8bef\u6355\u6349\u662f\u5b8c\u5168\u4e0d\u8d77\u4f5c\u7528\u7684\u3002"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"\u6355\u83b7\u9519\u8bef\u4e8b\u4ef6\u7684\u65b9\u6cd5\u4e0e\u533a\u522b",src:t(2403).A+"",width:"718",height:"158"})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u4e0b\u8fd9\u4e9b\u901a\u8fc7\u6d4f\u89c8\u5668\u7684api\u8fdb\u884c\u7684\u9519\u8bef\u6355\u6349\uff0c\u5728\u53d1\u751fhttp\u9519\u8bef\u548cpromise\u9519\u8bef\u7684\u65f6\u5019\u662f\u5b8c\u5168\u6ca1\u6709\u53cd\u5e94\u7684"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u80fd\u6355\u83b7\u6240\u6709\u540c\u6b65\u6267\u884c\u9519\u8bef\u3002\n// \u4e0d\u80fd\u6355\u83b7\u8bed\u6cd5\u9519\u8bef\u3002\n// \u80fd\u6355\u83b7\u666e\u901a\u5f02\u6b65\u4efb\u52a1\u9519\u8bef\u3002\n// \u4e0d\u80fd\u6355\u83b7Promise\u4efb\u52a1\u9519\u8bef\u3002\n// \u4e0d\u80fd\u6355\u83b7async\u4efb\u52a1\u9519\u8bef\u3002\n// \u4e0d\u80fd\u6355\u83b7\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef\u3002\nwindow.onerror = (e) => {\n    console.error('onerror\u6355\u6349\u9519\u8bef:', e);\n    LogsUtils.logToLocal('\u65e5\u5fd7\u6570\u636e' + JSON.stringify({ name: '\u5f20\u4e09', age: 12 }))\n}\n// \u9519\u8bef\u76d1\u63a7\n// \u53ef\u4ee5\u6355\u83b7\u8d44\u6e90\u52a0\u8f7d\u7684\u9519\u8bef\nwindow.addEventListener('error', event => {\n    console.error('addEventListener\u6355\u6349\u9519\u8bef:', event.error);\n    LogsUtils.logToLocal('\u65e5\u5fd7\u6570\u636e' + JSON.stringify({ name: '\u5f20\u4e09', age: 12 }))\n    // Sentry.captureException(event.error);\n});\nwindow.addEventListener('unhandledrejection', (error) => {\n    console.error('unhandledrejection\u6355\u6349\u9519\u8bef:', error)\n    LogsUtils.logToLocal('\u65e5\u5fd7\u6570\u636e' + JSON.stringify({ name: '\u5f20\u4e09', age: 12 }))\n})\nthis.http.post('/test', null).subscribe({\n    next: res => {\n\n    },\n    // error: err => {\n    //   // console.error('\u7ec4\u4ef6\u5185\u90e8\u7684\u9519\u8bef\u8f93\u51fa', err);\n    // }\n})\nnew Promise((resolve, reject) => {\n    reject('2121')\n})\n"})}),"\n",(0,r.jsx)(n.h1,{id:"angular\u7684\u9519\u8bef\u6355\u6349",children:"angular\u7684\u9519\u8bef\u6355\u6349"}),"\n",(0,r.jsxs)(n.p,{children:["\u9488\u5bf9angular\uff0c\u5176\u5b9e\u6846\u67b6\u6709\u9488\u5bf9\u9519\u8bef\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7\u5bf9",(0,r.jsx)(n.code,{children:"ErrorHandler"}),"\u7684\u5b9e\u73b0\uff0c\u5b8c\u6210\u5bf9\u9519\u8bef\u7684\u6355\u6349\u5904\u7406\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u5199\u597d\u7684demo\uff0c\u5176\u4e2dLogsUtils\u662f\u5c01\u88c5\u7684\u4e00\u4e2a\u5bf9\u9519\u8bef\u7684\u5904\u7406\u8bb0\u5f55\u903b\u8f91\uff0c\u901a\u8fc7\u683c\u5f0f\u5316\u9519\u8bef\u8fdb\u884c\u8bb0\u5f55\u65b9\u4fbf\u9605\u8bfb\uff0c\u4fdd\u5b58\u5728",(0,r.jsx)(n.code,{children:"localStorage"}),"\u4e2d\uff0c\u4f46\u8981\u6ce8\u610f\u7684\u662f",(0,r.jsx)(n.code,{children:"localStorage"}),"\u80fd\u4fdd\u5b58\u7684\u5927\u5c0f\u6709\u9650\uff0c\u6700\u540e\u5176\u5b9e\u53ef\u4ee5\u901a\u8fc7",(0,r.jsx)(n.code,{children:"indexdb"}),"\u8fdb\u884c\u5b58\u50a8"]}),"\n",(0,r.jsx)(n.h2,{id:"apperrorhandler",children:"AppErrorHandler"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'import { ErrorHandler, Injectable } from "@angular/core";\nimport { HttpErrorResponse } from "@angular/common/http";\nimport { LogsUtils } from "./logs-utils";\n\n@Injectable()\nexport class AppErrorHandler implements ErrorHandler {\n    handleError(error: Error | HttpErrorResponse) {\n        if (!navigator.onLine) {\n            console.error("\u6d4f\u89c8\u5668\u79bb\u7ebf!", error);\n            LogsUtils.logToLocal(\'\u6d4f\u89c8\u5668\u79bb\u7ebf\\r\\n\' + JSON.stringify({ name: \'\u5f20\u4e09\', age: 12 }))\n        } else {\n            if (error instanceof HttpErrorResponse) {\n                if (!navigator.onLine) {\n                    console.error("\u79bb\u7ebf\u9519\u8bef!", error);\n                    LogsUtils.logToLocal(\'\u79bb\u7ebf\u9519\u8bef\\r\\n\' + error.message)\n                } else {\n                    // Handle Http Error (4xx, 5xx, ect.)\n                    console.error("http\u9519\u8bef!", error);\n                    const status = error.status;\n                    const message = error.message.replace(/\\r?\\n/g, "\\r\\n");\n                    const errorTip = error.error.replace(/\\r?\\n/g, "\\r\\n");\n                    LogsUtils.logToLocal(`Http\u9519\u8bef\uff1a\\r\\n\u72b6\u6001\uff1a${status}\\r\\n\u7b80\u7565\u4fe1\u606f\uff1a${message}\\r\\n\u9519\u8bef\u8fd4\u56de\uff1a\\r\\n${errorTip}`)\n                }\n            } else {\n                // const name = error.name;\n                // const message = error.message.replace(/\\r?\\n/g, "\\r\\n");\n                console.error("\u5e94\u7528\u9519\u8bef!", error);\n                const stack = error.stack.replace(/\\r?\\n/g, "\\r\\n");\n                LogsUtils.logToLocal(`\u9519\u8bef\u5806\u6808\uff1a${stack}`)\n            }\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"logsutils",children:"LogsUtils"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"export class LogsUtils {\n\n  /**\n   * \u5728\u6d4f\u89c8\u5668\u672c\u5730\u8bb0\u5f55\u65e5\u5fd7\n   */\n  static logToLocal(loginfo: string) {\n    try {\n      console.log('\u8bb0\u5f55\u65e5\u5fd7--')\n      if (typeof (localStorage) !== 'undefined') {\n        let now = new Date()\n        const logClock = now.toLocaleDateString() + '/' + now.getHours().toString().padStart(2, '0');\n        // \u65e5\u5fd7\u6301\u4e45\u5316\u5bfb\u5740\u7f16\u53f7\uff0c\u91c7\u53d6\u65e5\u671f\u6765\u5b9a\u4f4d yyyy/MM/dd\n        // \u8bbe\u7f6e\u5f53\u524d\u65e5\u5fd7\u6240\u5728\u533a\u95f4\u7684\u540d\u79f0\u7f16\u53f7\uff0c\u907f\u514d\u53ea\u5199\u4e00\u4e2aitem\u8fc7\u5927\u5931\u8d25\n        let agentlogId = logClock\n        let logstr = window.localStorage.getItem(agentlogId)\n        if (typeof (logstr) === 'undefined' || !logstr) {\n          logstr = ''\n        }\n        let str = '[' + agentlogId + ']' + loginfo + '\\r\\n' // \u5c06\u65e5\u5fd7\u5185\u5bb9\u683c\u5f0f\u5316\uff0c\u52a0\u5165\u65e5\u671f\n        logstr = logstr + str\n        // \u5c06\u65e5\u5fd7\u5199\u5165localStorage\u4e2d,\u5355\u4e2aitem\u4e0d\u80fd\u8d85\u8fc75MB\uff0c\u4e0d\u8fc7\u4e00\u822c\u4e00\u4e2a\u5c0f\u65f6\u7684\u65e5\u5fd7\u4e0d\u53ef\u80fd\u8d85\u8fc7\u8fd9\u4e48\u591a\n        if (logstr.length * 2 < 1024 * 1024 * 5) {\n          localStorage.setItem(agentlogId, logstr)\n        } else {\n          console.log('\u5f53\u524d\u65f6\u6bb5' + agentlogId + '\u8bb0\u5f55\u7684\u65e5\u5fd7\u592a\u591a\u5df2\u65e0\u6cd5\u518d\u5199\u65e5\u5fd7\u5230localStorage\u4e2d')\n        }\n        // \u65e5\u5fd7\u5199\u5165\u5b8c\u6bd5\u540e\uff0c\u6ce8\u610f\u53ea\u6709\u540c\u57df\u540d\u540c\u7aef\u53e3\u7684\u670d\u52a1\u7aef\u7684\u9875\u9762\u624d\u80fd\u8bfb\u53d6\uff0c\u5426\u5219\u4f9d\u7136\u662f\u4e0d\u540c\u7684\n      } else {\n        console.log('\u62b1\u6b49\uff01\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8bb0\u5f55\u672c\u5730\u65e5\u5fd7\u3002IE11\u6d4f\u89c8\u5668\u5219\u53ef\u80fd\u662f\u56e0\u4e3a\u5728\u672c\u5730\u6253\u5f00\u7684\u7f51\u9875')\n      }\n    } catch (e) {\n      console.log('\u8bb0\u5f55\u65e5\u5fd7\u5931\u8d25', e)\n    }\n\n  }\n\n  /**\n   * \u751f\u6210\u548c\u53d6\u5f97\u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6 yyyy/MM/dd/hh\n   */\n  static downloadLog(agentlogId: string) {\n    let browserMatch = uaMatch()\n    let broserVer = browserMatch.browser + browserMatch.version\n    let downloadFileName = agentlogId + '-cc-agent.log'\n    let file = 'data:text/plain;charset=utf-8,'\n    if (broserVer.indexOf('IE11') >= 0) {\n      try {\n        let logstr = localStorage.getItem(agentlogId)\n        file += logstr\n        let blobObject = new Blob([file])\n        //   window.navigator.msSaveBlob(blobObject, downloadFileName)\n        const navigator: any = window.navigator;\n        if (navigator && navigator.msSaveBlob) {\n          navigator.msSaveBlob(blobObject, downloadFileName);\n          // navigator.msSaveOrOpenBlob(blobObject, downloadFileName);\n        } else {\n          const a = document.createElement('a')     //\u521b\u5efa\u4e00\u4e2aa\u94fe\u63a5\n          const url = window.URL.createObjectURL(blobObject)\n          a.href = url  //\u521b\u5efaa\u8fde\u63a5\u7684href\n          a.download = downloadFileName //\u8bbe\u7f6e\u540d\u79f0\n          a.click()   //\u70b9\u51fb\u4e8b\u4ef6\n          window.URL.revokeObjectURL(url) //\u91ca\u653eurl\u5bf9\u8c61\n        }\n      } catch (e) {\n        alert('\u4e0b\u8f7d\u6587\u4ef6\u65f6\u51fa\u73b0\u9519\u8bef' + e)\n      }\n    } else {\n      try {\n        downloadFileName = agentlogId + '-cc-agent.log'\n        file = 'data:text/plain;charset=utf-8,'\n        let logstr = localStorage.getItem(agentlogId)\n        let encoded = encodeURIComponent(logstr) // \u8fd9\u4e00\u6b65\u4e3a\u4e86\u4e0b\u8f7d\u662f\u5fc5\u987b\u7684\n        file += encoded\n        let downloadevent = document.createElement('a')\n        downloadevent.href = file\n        downloadevent.target = '_blank'\n        downloadevent.download = downloadFileName\n        document.body.appendChild(downloadevent)\n        downloadevent.click()\n        downloadevent.remove()\n      } catch (e) {\n        alert('\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8bb0\u5f55\u672c\u5730\u65e5\u5fd7\u3002IE11\u6d4f\u89c8\u5668\u5219\u53ef\u80fd\u662f\u56e0\u4e3a\u5728\u672c\u5730\u6253\u5f00\u7684\u7f51\u9875' + e)\n      }\n    }\n    this.logToLocal('\u5b8c\u6210\u4e00\u6b21\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u4e0b\u8f7d\u65e5\u5fd7\u540d\uff1a' + agentlogId)\n  }\n\n  /**\n   * \u67e5\u770b\u65e5\u5fd7\n   * toLocaleDateString\n   * @param agentlogId yyyy/MM/dd/hh\n   * @returns \n   */\n  static getLog(agentlogId: string) {\n    try {\n      this.logToLocal('\u67e5\u8be2\u4e00\u6b21\u65e5\u5fd7\uff0c\u67e5\u8be2\u65e5\u5fd7\u540d\uff1a' + agentlogId)\n      return localStorage.getItem(agentlogId)\n    } catch (e) {\n      alert('\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8bb0\u5f55\u672c\u5730\u65e5\u5fd7\u3002IE11\u6d4f\u89c8\u5668\u5219\u53ef\u80fd\u662f\u56e0\u4e3a\u5728\u672c\u5730\u6253\u5f00\u7684\u7f51\u9875' + e)\n    }\n  }\n\n  /**\n   * \u5b9a\u671f\u6e05\u9664\u65e5\u5fd7\uff0c\u91ca\u653e\u7a7a\u95f4\u53ef\u4ee5\u7528\u5230 \u6ce8\u610f\uff1a\u4ee5\u4e0b\u6e05\u7406\u64cd\u4f5c\u662f\u5f02\u6b65\u7684\uff0c\u6240\u4ee5\u5feb\u901f\u64cd\u4f5c\u53ef\u80fd\u611f\u89c9\u8d77\u6765\u6ca1\u6709\u6e05\u7406\u5b8c\u6bd5\n   * @param agentlogId yyyy/MM/dd/hh\n   */\n  static deleteLog(agentlogId: string) {\n    try {\n      localStorage.removeItem(agentlogId)\n      this.logToLocal('\u5b8c\u6210\u4e00\u6b21\u65e5\u5fd7\u5220\u9664\uff0c\u5220\u9664\u65e5\u5fd7\u540d\uff1a' + agentlogId)\n    } catch (e) {\n      alert('\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8bb0\u5f55\u672c\u5730\u65e5\u5fd7\u3002IE11\u6d4f\u89c8\u5668\u5219\u53ef\u80fd\u662f\u56e0\u4e3a\u5728\u672c\u5730\u6253\u5f00\u7684\u7f51\u9875' + e)\n    }\n  }\n\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u4e0b\u8f7d\u65f6\u5019\u83b7\u53d6\u6d4f\u89c8\u5668\u4fe1\u606f",children:"\u4e0b\u8f7d\u65f6\u5019\u83b7\u53d6\u6d4f\u89c8\u5668\u4fe1\u606f"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"/**\n * \u5224\u65ad\u53d6\u5f97\u5f53\u524d\u6d4f\u89c8\u5668\u7684\u7248\u672c\n */\nfunction uaMatch() {\n  // \u6b63\u5219\u8868\u8fbe\u5f0f\u65b9\u5f0f\u6765\u5224\u5b9auser-agent\u5b57\u7b26\u4e32\uff0c\u5f97\u5230\u5f53\u524d\u8bbf\u95ee\u6d4f\u89c8\u5668\uff08http\u4ee3\u7406\uff09\u7684\u7248\u672c\n  let userAgent = navigator.userAgent\n  let rMsie = /(msie\\s|trident.*rv:)([\\w.]+)/\n  let rFirefox = /(firefox)\\/([\\w.]+)/\n  let rOpera = /(opera).+version\\/([\\w.]+)/\n  let rChrome = /(chrome)\\/([\\w.]+)/\n  let rSafari = /version\\/([\\w.]+).*(safari)/\n  let ua = userAgent.toLowerCase()\n  let match = rMsie.exec(ua)\n\n  if (match != null) {\n    return { browser: 'IE', version: match[2] || '0' }\n  }\n  match = rFirefox.exec(ua)\n  if (match != null) {\n    return { browser: match[1] || '', version: match[2] || '0' }\n  }\n  match = rOpera.exec(ua)\n  if (match != null) {\n    return { browser: match[1] || '', version: match[2] || '0' }\n  }\n  match = rChrome.exec(ua)\n  if (match != null) {\n    return { browser: match[1] || '', version: match[2] || '0' }\n  }\n  match = rSafari.exec(ua)\n  if (match != null) {\n    return { browser: match[2] || '', version: match[1] || '0' }\n  }\n  if (match == null) {\n    return { browser: '', version: '0' }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h1,{id:"indexdb\u7684\u5c01\u88c5",children:"indexdb\u7684\u5c01\u88c5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'export class IndexedDBUtils {\n  /**\n   * \u6253\u5f00\u6570\u636e\u5e93\n   * @param  dbName \u6570\u636e\u5e93\u7684\u540d\u5b57\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  version \u6570\u636e\u5e93\u7684\u7248\u672c\n   * @return  \u8be5\u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\n   */\n  static openDB(dbName: string, version = 1, dbInfo: { keyPath: string, indexs: Array<string> }) {\n    return new Promise<IDBDatabase>((resolve, reject) => {\n      //  \u517c\u5bb9\u6d4f\u89c8\u5668\n      // @ts-ignore\n      let indexedDB: IDBFactory = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\n      let db: IDBDatabase;\n      // \u6253\u5f00\u6570\u636e\u5e93\uff0c\u82e5\u6ca1\u6709\u5219\u4f1a\u521b\u5efa\n      const request = indexedDB.open(dbName, version);\n      // \u6570\u636e\u5e93\u6253\u5f00\u6210\u529f\u56de\u8c03\n      request.onsuccess = (event) => {\n        db = (event.target as any).result; // \u6570\u636e\u5e93\u5bf9\u8c61\n        resolve(db);\n      };\n      // \u6570\u636e\u5e93\u6253\u5f00\u5931\u8d25\u7684\u56de\u8c03\n      request.onerror = (event) => reject(event);\n\n      // \u6570\u636e\u5e93\u6709\u66f4\u65b0\u65f6\u5019\u7684\u56de\u8c03\n      request.onupgradeneeded = (event) => {\n        // \u6570\u636e\u5e93\u521b\u5efa\u6216\u5347\u7ea7\u7684\u65f6\u5019\u4f1a\u89e6\u53d1\n        db = (event.target as any).result; // \u6570\u636e\u5e93\u5bf9\u8c61\n        // \u521b\u5efa\u5b58\u50a8\u5e93\uff0c\u5efa\u8868\n        let objectStore: IDBObjectStore = db.createObjectStore("table", {\n          keyPath: dbInfo.keyPath, // \u8fd9\u662f\u4e3b\u952e\n          autoIncrement: true // \u5b9e\u73b0\u81ea\u589e\n        });\n        // \u521b\u5efa\u7d22\u5f15\uff0c\u5728\u540e\u9762\u67e5\u8be2\u6570\u636e\u7684\u65f6\u5019\u53ef\u4ee5\u6839\u636e\u7d22\u5f15\u67e5\n        dbInfo.indexs.forEach(item => {\n          objectStore.createIndex(item, item, { unique: false });\n        })\n      };\n    });\n  }\n\n  /**\n   * \u65b0\u589e\u6570\u636e\uff0c\u63d2\u5165\u7684\u6570\u636e\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u800c\u4e14\u5fc5\u987b\u5305\u542b\u6211\u4eec\u58f0\u660e\u7684\u7d22\u5f15\u952e\u503c\u5bf9\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  data \u6570\u636e\n   */\n  static addData(db: IDBDatabase, storeName: string, data: any) {\n    let request = db\n      .transaction([storeName], "readwrite") // \u4e8b\u52a1\u5bf9\u8c61 \u6307\u5b9a\u8868\u683c\u540d\u79f0\u548c\u64cd\u4f5c\u6a21\u5f0f\uff08"\u53ea\u8bfb"\u6216"\u8bfb\u5199"\uff09\n      .objectStore(storeName) // \u4ed3\u5e93\u5bf9\u8c61\n      .add(data);\n\n    request.onsuccess = (event) => {\n      console.log("\u6570\u636e\u5199\u5165\u6210\u529f", event);\n    };\n\n    request.onerror = (event) => {\n      console.log("\u6570\u636e\u5199\u5165\u5931\u8d25", event);\n    };\n  }\n  /**\n   * \u901a\u8fc7\u4e3b\u952e\u8bfb\u53d6\u6570\u636e\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  key \u4e3b\u952e\u503c\n   */\n  static getDataByKey(db: IDBDatabase, storeName: string, key: string | number) {\n    return new Promise((resolve, reject) => {\n      let transaction = db.transaction([storeName]); // \u4e8b\u52a1\n      let objectStore = transaction.objectStore(storeName); // \u4ed3\u5e93\u5bf9\u8c61\n      let request = objectStore.get(key); // \u901a\u8fc7\u4e3b\u952e\u83b7\u53d6\u6570\u636e\n      request.onerror = (event) => {\n        reject(event);\n      };\n      request.onsuccess = (event) => {\n        resolve(request.result);\n      };\n    });\n  }\n  /**\n   * \u901a\u8fc7\u7d22\u5f15\u8bfb\u53d6\u6570\u636e\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  indexName \u7d22\u5f15\u540d\u79f0\n   * @param  indexValue \u7d22\u5f15\u503c\n   */\n  static getDataByIndex(db: IDBDatabase, storeName: string, indexName: string, indexValue: string | number) {\n    return new Promise((resolve, reject) => {\n      let store = db.transaction(storeName, "readwrite").objectStore(storeName);\n      let request = store.index(indexName).get(indexValue);\n      request.onerror = (event) => {\n        reject(event)\n      };\n      request.onsuccess = (event) => {\n        let result = (event.target as IDBRequest).result;\n        resolve(result);\n      };\n    })\n  }\n  /**\n   * \u83b7\u53d6\u4e00\u4e2a\u5bf9\u8c61\u4ed3\u5e93\u7684\u6240\u6709\u6570\u636e\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   */\n  static getAllByStroe(db: IDBDatabase, storeName: string) {\n    return new Promise((resolve, reject) => {\n      let transaction = db.transaction([storeName]); // \u4e8b\u52a1\n      let objectStore = transaction.objectStore(storeName); // \u4ed3\u5e93\u5bf9\u8c61\n      let request = objectStore.getAll();\n      request.onerror = (event) => {\n        reject(event)\n      };\n      request.onsuccess = (event) => {\n        resolve(request.result);\n      };\n    });\n  }\n  /**\n   * \u901a\u8fc7\u6e38\u6807\u8bfb\u53d6\u6570\u636e\uff0c\u62ff\u5230\u7684\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\u4ed3\u5e93\u7684\u6240\u6709\u6570\u636e\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   */\n  static getDataByCursor(db: IDBDatabase, storeName: string) {\n    return new Promise((resolve, reject) => {\n      let list = [];\n      let store = db\n        .transaction(storeName, "readwrite") // \u4e8b\u52a1\n        .objectStore(storeName); // \u4ed3\u5e93\u5bf9\u8c61\n      let request = store.openCursor(); // \u6307\u9488\u5bf9\u8c61\n      // \u6e38\u6807\u5f00\u542f\u6210\u529f\uff0c\u9010\u884c\u8bfb\u6570\u636e\n      request.onsuccess = (event) => {\n        let cursor = (event.target as IDBRequest).result;\n        if (cursor) {\n          // \u5fc5\u987b\u8981\u68c0\u67e5\n          list.push(cursor.value);\n          cursor.continue(); // \u904d\u5386\u4e86\u5b58\u50a8\u5bf9\u8c61\u4e2d\u7684\u6240\u6709\u5185\u5bb9\n        } else {\n          // console.log("\u6e38\u6807\u8bfb\u53d6\u7684\u6570\u636e\uff1a", list);\n          resolve(list);\n        }\n      };\n    })\n  }\n\n  /**\n   * \u901a\u8fc7\u7d22\u5f15\u548c\u6e38\u6807\u67e5\u8be2\u8bb0\u5f55\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  indexName \u7d22\u5f15\u540d\u79f0\n   * @param  indexValue \u7d22\u5f15\u503c\n   */\n  static getDataByIndexCursor(db: IDBDatabase, storeName: string, indexName: string, indexValue: string | number) {\n    return new Promise((resolve, reject) => {\n      let list = [];\n      let store = db.transaction(storeName, "readwrite").objectStore(storeName); // \u4ed3\u5e93\u5bf9\u8c61\n      let request = store\n        .index(indexName) // \u7d22\u5f15\u5bf9\u8c61\n        .openCursor(IDBKeyRange.only(indexValue)); // \u6307\u9488\u5bf9\u8c61\n      request.onsuccess = (event) => {\n        let cursor = (event.target as IDBRequest).result;\n        if (cursor) {\n          // \u5fc5\u987b\u8981\u68c0\u67e5\n          list.push(cursor.value);\n          cursor.continue(); // \u904d\u5386\u4e86\u5b58\u50a8\u5bf9\u8c61\u4e2d\u7684\u6240\u6709\u5185\u5bb9\n        } else {\n          // console.log("\u6e38\u6807\u7d22\u5f15\u67e5\u8be2\u7ed3\u679c\uff1a", list);\n          resolve(list);\n        }\n      };\n      request.onerror = (event) => reject(event);\n    })\n  }\n\n  /**\n   * \u901a\u8fc7\u7d22\u5f15\u548c\u6e38\u6807\u5206\u9875\u67e5\u8be2\u8bb0\u5f55\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  indexName \u7d22\u5f15\u540d\u79f0\n   * @param  indexValue \u7d22\u5f15\u503c\n   * @param  page \u9875\u7801\n   * @param  pageSize \u67e5\u8be2\u6761\u6570\n   */\n  static getDataByIndexCursorAndPage(\n    db: IDBDatabase,\n    storeName: string,\n    indexName: string,\n    indexValue: string | number,\n    page: number,\n    pageSize: number\n  ) {\n    return new Promise((resolve, reject) => {\n      let list = [];\n      let counter = 0; // \u8ba1\u6570\u5668\n      let advanced = true; // \u662f\u5426\u8df3\u8fc7\u591a\u5c11\u6761\u67e5\u8be2\n      let store = db.transaction(storeName, "readwrite").objectStore(storeName); // \u4ed3\u5e93\u5bf9\u8c61\n      let request = store.index(indexName).openCursor(IDBKeyRange.only(indexValue));\n      request.onsuccess = (event) => {\n        let cursor = (event.target as IDBRequest).result;\n        if (page > 1 && advanced) {\n          advanced = false;\n          cursor.advance((page - 1) * pageSize); // \u8df3\u8fc7\u591a\u5c11\u6761\n          return;\n        }\n        if (cursor) {\n          // \u5fc5\u987b\u8981\u68c0\u67e5\n          list.push(cursor.value);\n          counter++;\n          if (counter < pageSize) {\n            cursor.continue(); // \u904d\u5386\u4e86\u5b58\u50a8\u5bf9\u8c61\u4e2d\u7684\u6240\u6709\u5185\u5bb9\n          } else {\n            cursor = null;\n            // console.log("\u5206\u9875\u67e5\u8be2\u7ed3\u679c", list);\n            resolve(list);\n          }\n        } else {\n          resolve(list);\n          console.log("\u5206\u9875\u67e5\u8be2\u7ed3\u679c", list);\n        }\n      };\n      request.onerror = (event) => reject(event);\n    })\n  }\n\n  /**\n   * \u66f4\u65b0\u6570\u636e\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  data \u6570\u636e\n   */\n  static updateDB(db: IDBDatabase, storeName: string, data) {\n    return new Promise((resolve, reject) => {\n      let request = db\n        .transaction([storeName], "readwrite") // \u4e8b\u52a1\u5bf9\u8c61\n        .objectStore(storeName) // \u4ed3\u5e93\u5bf9\u8c61\n        .put(data);\n\n      request.onsuccess = (event) => {\n        resolve(event);\n      };\n\n      request.onerror = (event) => {\n        reject(event)\n      };\n    })\n  }\n\n  /**\n   * \u901a\u8fc7\u4e3b\u952e\u5220\u9664\u6570\u636e\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  id \u4e3b\u952e\u503c\n   */\n  static deleteDataByKey(db: IDBDatabase, storeName: string, id: string | number) {\n    return new Promise((resolve, reject) => {\n      let request = db.transaction([storeName], "readwrite").objectStore(storeName).delete(id);\n      request.onsuccess = (event) => resolve(event);\n      request.onerror = (event) => reject(event);\n    })\n  }\n\n  /**\n   * \u901a\u8fc7\u7d22\u5f15\u548c\u6e38\u6807\u5220\u9664\u6307\u5b9a\u7684\u6570\u636e\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   * @param  storeName \u4ed3\u5e93\u540d\u79f0\n   * @param  indexName \u7d22\u5f15\u540d\n   * @param  indexValue \u7d22\u5f15\u503c\n   */\n  static deleteDataByCursor(db: IDBDatabase, storeName: string, indexName: string, indexValue: string | number) {\n    return new Promise((resolve, reject) => {\n      let store = db.transaction(storeName, "readwrite").objectStore(storeName);\n      let request = store\n        .index(indexName) // \u7d22\u5f15\u5bf9\u8c61\n        .openCursor(IDBKeyRange.only(indexValue)); // \u6307\u9488\u5bf9\u8c61\n      request.onsuccess = (event) => {\n        let cursor = (event.target as IDBRequest).result;\n        let deleteRequest;\n        if (cursor) {\n          deleteRequest = cursor.delete(); // \u8bf7\u6c42\u5220\u9664\u5f53\u524d\u9879\n          deleteRequest.onerror = (e) => reject(e);\n          deleteRequest.onsuccess = (e) => resolve(e);\n          cursor.continue();\n        }\n      };\n      request.onerror = (event) => reject(event);\n    })\n  }\n\n  /**\n   * \u5173\u95ed\u6570\u636e\u5e93\n   * @param  db \u6570\u636e\u5e93\u5b9e\u4f8b\n   */\n  static closeDB(db: IDBDatabase) {\n    db.close();\n    console.log("\u6570\u636e\u5e93\u5df2\u5173\u95ed");\n  }\n  /**\n   * \u5220\u9664\u6570\u636e\u5e93\n   * @param  dbName \u6570\u636e\u5e93\u540d\u79f0\n   */\n  static deleteDBAll(db: IDBDatabase, dbName: string) {\n    db.close();\n    let deleteRequest = window.indexedDB.deleteDatabase(dbName);\n    deleteRequest.onerror = (event) => {\n      console.log("\u5220\u9664\u5931\u8d25");\n    };\n    deleteRequest.onsuccess = (event) => {\n      console.log("\u5220\u9664\u6210\u529f");\n    };\n  }\n\n\n}\n'})}),"\n",(0,r.jsx)(n.h1,{id:"indexdb\u7684\u4f7f\u7528",children:"indexdb\u7684\u4f7f\u7528"}),"\n",(0,r.jsxs)(n.p,{children:["\u53ef\u4ee5\u5728\u6355\u6349\u5230\u9519\u8bef\u7684\u65f6\u5019\uff0c\u6253\u5f00",(0,r.jsx)(n.code,{children:"indexdb"}),"\u6570\u636e\u5e93\uff0c\u7136\u540e\u901a\u8fc7",(0,r.jsx)(n.code,{children:"addData"}),"\u5f80\u6570\u636e\u5e93\u4e2d\u4fdd\u5b58\u9519\u8bef\u4fe1\u606f\uff0c\u7136\u540e\u5173\u95ed\u6570\u636e\u5e93\u3002",(0,r.jsx)(n.code,{children:"indexdb"}),"\u7684\u77e5\u8bc6\u9700\u8981\u81ea\u5df1\u591a\u4e86\u89e3"]}),"\n",(0,r.jsx)(n.h2,{id:"html",children:"html"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<div>\n  <button (click)="download2log()">\u4e0b\u8f7d\u65e5\u5fd7</button>\n  <button (click)="delete2log()">\u5220\u9664\u65e5\u5fd7</button>\n  <button (click)="test()">\u6d4b\u8bd5\u9519\u8bef</button>\n  <br>\n  <br>\n  <button (click)="openDB()">\u6253\u5f00\u6570\u636e\u5e93</button>\n  <button (click)="addData()">\u6dfb\u52a0\u6570\u636e</button>\n  <button (click)="getDataByIndex()">\u901a\u8fc7\u7d22\u5f15\u8bfb\u53d6\u6570\u636e</button>\n  <button (click)="getDataByKey()">\u901a\u8fc7\u4e3b\u952e\u8bfb\u53d6\u6570\u636e</button>\n  <button (click)="getAllByStroe()">\u83b7\u53d6\u4e00\u4e2a\u4ed3\u5e93\u7684\u6240\u6709\u6570\u636e</button>\n  <button (click)="getDataByCursor()">\u901a\u8fc7\u6e38\u6807\u8bfb\u53d6\u6570\u636e</button>\n  <button (click)="getDataByIndexCursor()">\u901a\u8fc7\u6e38\u6807\u7d22\u5f15\u8bfb\u53d6\u6570\u636e</button>\n  <button (click)="getDataByIndexCursorAndPage()">\u901a\u8fc7\u7d22\u5f15\u548c\u6e38\u6807\u5206\u9875\u67e5\u8be2\u8bb0\u5f55</button>\n  <button (click)="deleteDataByKey()">\u5220\u9664\u6570\u636e</button>\n  <button (click)="closeDB()">\u5173\u95ed\u6570\u636e\u5e93</button>\n  <button (click)="deleteDBAll()">\u5220\u9664\u6570\u636e\u5e93</button>\n</div>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"typescript",children:"typescript"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"  test() {\n    let obj: any = {};\n    if (obj.b.c) {\n\n    }\n  }\n  download2log() {\n    let now = new Date()\n    const time = now.toLocaleDateString() + '/' + now.getHours().toString().padStart(2, '0');\n    LogsUtils.downloadLog(time)\n  }\n  // \u5220\u9664\u65e5\u5fd7\n  delete2log() {\n    let now = new Date()\n    const time = now.toLocaleDateString() + '/' + now.getHours().toString().padStart(2, '0');\n    LogsUtils.deleteLog(time)\n  }\n\n  openDB() {\n    IndexedDBUtils.openDB('testDB', 1, { keyPath: 'id', indexs: ['name', 'gender', 'age'] }).then(data => {\n      console.log('\u6253\u5f00\u6570\u636e\u5e93\u56de\u8c03\u6210\u529f', data);\n      this.dbInstance = data;\n    })\n  }\n  closeDB() {\n    IndexedDBUtils.closeDB(this.dbInstance);\n  }\n  deleteDataByKey() {\n    IndexedDBUtils.deleteDataByKey(this.dbInstance, 'table', 8).then(data => {\n      console.log('\u5220\u9664\u7ed3\u679c', data)\n    });\n  }\n  deleteDBAll() {\n    IndexedDBUtils.deleteDBAll(this.dbInstance, 'testDB');\n  }\n  addData() {\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u5f20\u4e09', gender: 'man', age: 20 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u674e\u56db', gender: 'female', age: 18 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u738b\u4e94', gender: 'man', age: 19 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u8d75\u516d', gender: 'female', age: 19 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u5f20\u98de', gender: 'female', age: 21 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u5173\u7fbd', gender: 'man', age: 22 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u8d75\u4e91', gender: 'female', age: 23 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u9ec4\u5fe0', gender: 'man', age: 20 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u9a6c\u8d85', gender: 'man', age: 19 })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { name: '\u5f20\u4e09' })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { gender: 'man' })\n    IndexedDBUtils.addData(this.dbInstance, 'table', { age: 20 })\n  }\n  getAllByStroe() {\n    IndexedDBUtils.getAllByStroe(this.dbInstance, 'table').then(data => {\n      console.log('\u83b7\u53d6\u4e00\u4e2a\u4ed3\u5e93\u7684\u6240\u6709\u6570\u636e', data);\n    })\n  }\n  getDataByIndex() {\n    IndexedDBUtils.getDataByIndex(this.dbInstance, 'table', 'name', '\u5f20\u4e09').then(data => {\n      console.log('\u901a\u8fc7\u7d22\u5f15\u8bfb\u53d6\u6570\u636e', data);\n    });\n  }\n  getDataByKey() {\n    IndexedDBUtils.getDataByKey(this.dbInstance, 'table', 2).then(data => {\n      console.log('\u901a\u8fc7\u4e3b\u952e\u8bfb\u53d6\u6570\u636e', data);\n    });\n  }\n  getDataByCursor() {\n    IndexedDBUtils.getDataByCursor(this.dbInstance, 'table').then(data => {\n      console.log('\u901a\u8fc7\u6e38\u6807\u8bfb\u53d6\u6570\u636e', data);\n    });\n  }\n  getDataByIndexCursor() {\n    IndexedDBUtils.getDataByIndexCursor(this.dbInstance, 'table', 'name', '\u5f20\u4e09').then(data => {\n      console.log('\u901a\u8fc7\u7d22\u5f15\u548c\u6e38\u6807\u67e5\u8be2\u8bb0\u5f55', data);\n    });\n  }\n  getDataByIndexCursorAndPage() {\n    IndexedDBUtils.getDataByIndexCursorAndPage(this.dbInstance, 'table', 'name', '\u5f20\u4e09', 2, 1).then(data => {\n      console.log('\u901a\u8fc7\u7d22\u5f15\u548c\u6e38\u6807\u5206\u9875\u67e5\u8be2\u8bb0\u5f55', data);\n    });\n  }\n"})})]})}function g(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},2403:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/\u6355\u83b7\u9519\u8bef\u4e8b\u4ef6\u7684\u65b9\u6cd5\u4e0e\u533a\u522b-23df57e94a6ebbd0e1a2c4d84247e89c.jpg"},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var a=t(6540);const r={},o=a.createContext(r);function s(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);