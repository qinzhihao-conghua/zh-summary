(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{109:function(e,n,r){"use strict";r.d(n,"a",(function(){return l})),r.d(n,"b",(function(){return m}));var t=r(0),s=r.n(t);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function u(e,n){if(null==e)return{};var r,t,s=function(e,n){if(null==e)return{};var r,t,s={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(s[r]=e[r]);return s}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var a=s.a.createContext({}),b=function(e){var n=s.a.useContext(a),r=n;return e&&(r="function"==typeof e?e(n):o(o({},n),e)),r},l=function(e){var n=b(e.components);return s.a.createElement(a.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return s.a.createElement(s.a.Fragment,{},n)}},f=s.a.forwardRef((function(e,n){var r=e.components,t=e.mdxType,i=e.originalType,c=e.parentName,a=u(e,["components","mdxType","originalType","parentName"]),l=b(r),f=t,m=l["".concat(c,".").concat(f)]||l[f]||p[f]||i;return r?s.a.createElement(m,o(o({ref:n},a),{},{components:r})):s.a.createElement(m,o({ref:n},a))}));function m(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var i=r.length,c=new Array(i);c[0]=f;var o={};for(var u in n)hasOwnProperty.call(n,u)&&(o[u]=n[u]);o.originalType=e,o.mdxType="string"==typeof e?e:t,c[1]=o;for(var a=2;a<i;a++)c[a]=r[a];return s.a.createElement.apply(null,c)}return s.a.createElement.apply(null,r)}f.displayName="MDXCreateElement"},76:function(e,n,r){"use strict";r.r(n),r.d(n,"frontMatter",(function(){return i})),r.d(n,"metadata",(function(){return c})),r.d(n,"toc",(function(){return o})),r.d(n,"default",(function(){return a}));var t=r(3),s=(r(0),r(109));const i={},c={unversionedId:"\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u89c2\u5bdf\u8005\u6a21\u5f0f/\u89c2\u5bdf\u8005\u6a21\u5f0f",id:"\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u89c2\u5bdf\u8005\u6a21\u5f0f/\u89c2\u5bdf\u8005\u6a21\u5f0f",isDocsHomePage:!1,title:"\u89c2\u5bdf\u8005\u6a21\u5f0f",description:"`javascript",source:"@site/docs/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u89c2\u5bdf\u8005\u6a21\u5f0f/\u89c2\u5bdf\u8005\u6a21\u5f0f.md",slug:"/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u89c2\u5bdf\u8005\u6a21\u5f0f/\u89c2\u5bdf\u8005\u6a21\u5f0f",permalink:"/zh-summary/docs/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u89c2\u5bdf\u8005\u6a21\u5f0f/\u89c2\u5bdf\u8005\u6a21\u5f0f",editUrl:"https://github.com/qinzhihao-conghua/docs/\u77e5\u8bc6\u4e0e\u6280\u80fd\u70b9/\u89c2\u5bdf\u8005\u6a21\u5f0f/\u89c2\u5bdf\u8005\u6a21\u5f0f.md",version:"current"},o=[],u={toc:o};function a(e){let{components:n,...r}=e;return Object(s.b)("wrapper",Object(t.a)({},u,r,{components:n,mdxType:"MDXLayout"}),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"//\u53d1\u5e03\u8005\u7684\u6784\u9020\u51fd\u6570\nfunction Publish() {\n  this.subscribers = []; //\u8ba2\u9605\u8005\u5217\u8868\uff0c\u6bcf\u4e2a\u8ba2\u9605\u8005\u5176\u5b9e\u662f\u4e00\u4e2a\u5904\u7406\u5f97\u5230\u4fe1\u606f\u7684\u51fd\u6570\n}\n\n//\u53d1\u5e03\u8005\u7684\u53d1\u5e03\u65b9\u6cd5\nPublish.prototype.next = function (news) {\n  this.subscribers.forEach(fn => fn(news)) //\u5c06\u4fe1\u606f\u53d1\u5e03\u7ed9\u6bcf\u4e2a\u8ba2\u9605\u8005\uff0cfn\u4ee3\u8868\u8ba2\u9605\u8005\n  return this //\u94fe\u5f0f\u7f16\u7a0b\n}\n\n//\u89c2\u5bdf\u8005\u7684\u8ba2\u9605\u65b9\u6cd5\nPublish.prototype.subscribe = function (callback) {\n  let alreadyIn = this.subscribers.some(sub => sub == this)\n  if (!alreadyIn) {\n    this.subscribers.push(callback)\n  }\n  return this\n}\n\n//\u53d6\u6d88\u8ba2\u9605\nPublish.prototype.unsubscribe = function () {\n  // this.subscribers.filter(subscriber=>subscriber!==this);\n  this.subscribers = [];\n  return this\n}\n//   //\u89c2\u5bdf\u8005\u7684\u8ba2\u9605\u65b9\u6cd5\n//   Function.prototype.subscribe = function(publisher){  \n//     let alreadyIn = publisher.subscribers.some( subscriber => subscriber == this)\n//     if(!alreadyIn){\n//       publisher.subscribers.push(this)\n//     }\n//     return this\n//   }\n\n//   //\u53d6\u6d88\u8ba2\u9605\n//   Function.prototype.unsubscribe = function(publisher){\n//     publisher.subscribers.filter(subscriber=>subscriber!==this)\n//     return this\n//   }\n")),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-javascript"},"<script>\n    function fn() {\n        const demo = new Publish();\n        setInterval(() => {\n            demo.next(Math.random());\n        }, 1000);\n        return demo;\n    }\n    const result = fn().subscribe(a => {\n        console.log('--------', a);\n    });\n\n    function cancel() {\n        result.unsubscribe()\n    }\n<\/script>\n")))}a.isMDXComponent=!0}}]);